<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed|Roboto+Mono" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/common.css"/>
  <link rel="stylesheet" href="../assets/css/page3.css"/>
  <title>$this</title>
</head>
<body>
  <header>
    <nav>
      <ul>
        <li title="Home"><a href="index.html">0</a></li>
        <li title="Créer une classe et des objets"><a href="page1.html">1</a></li>
        <li title="Manipuler un objet"><a href="page2.html">2</a></li>
        <li title="$this"><a href="page3.html">3</a></li>
        <li title="Encapsulation"><a href="page4.html">4</a></li>
        <li title="Constructeurs"><a href="page5.html">5</a></li>
        <li title="Autoloading"><a href="page6.html">6</a></li>
        <li title="Héritage"><a href="page7.html">7</a></li>
        <li title="Opérateur de résolution de portée"><a href="page8.html">8</a></li>
        <li title="Constantes"><a href="page9.html">9</a></li>
        <li title="Static"><a href="page10.html">10</a></li>
        <li title="Exo du garage"><a href="page11.html">11</a></li>
      </ul>
    </nav>
  </header>
  <h2>$this</h2>
  <p>
    En PHP, "$this" est utilisé dans le cadre de la POO pour faire référence
    à <i>l'objet appelant</i>. Explication par l'exemple :
  </p>
  <p>
    Revenons-en à notre classe <i>Pokemon</i> et l'écriture des fonctions.
  </p>
  <h3>$this dans la fonction <i>attaquer()</i></h3>
  <p>
    Un Pokémon peut en attaquer un autre, qui subit alors des dégâts
    <span class="chucho">(disons 5pts)</span>.<br/>
    Par ailleurs, le pokémon qui attaque gagne 1 point d'XP.
    <img class="code" src="../assets/img/codes/attaquer.png" alt="">
  </p>
  <p>
    En argument, on passe la cible, en précisant de quel type d'objet il s'agit.
    Une erreur sera alors soulevée si un pokémon essaye d'attaquer une aubergine.
  </p>
  <p>
    On utilise le symbole "->" pour appeler la fonction <i>subir_degats()</i> de la cible,
    avec les dégâts en paramètres.
  </p>
  <p>
    Pour la partie concernant le gain d'XP, on utilise "$this" pour
    accéder à l'attribut XP du pokémon qui attaque afin de lui ajouter 1 pt
    <b>car c'est lui qui appelle la fonction <i>attaquer()</i></b>
  </p>
  <h3>$this dans la fonction <i>subir_degats()</i></h3>
  <p>
    <img class="code" src="../assets/img/codes/subir_degats.png" alt="">
  </p>
  <p>
    Dans ce cas-ci, "$this" fait référence au pokémon cible,
    <b>car c'est lui qui appelle la fonction <i>subir_degats()</i></b>.
  </p>
  <div id="demo_page3" >
    <h3 style="padding:30px 0 0 0;">Pas encore tout à fait clair ?</h3>
    <aside id="pokemon_page3">
      <div id="pokemon_1">
        <img class="pokemon" src="../assets/img/pokemon/bulbi.png" alt=""><br/>
        <aside id="pv_1">PV : 20</aside>
        <aside id="xp_1">XP : 10 </aside>
      </div>
      <div id="pokemon_2">
        <img  class="pokemon" src="../assets/img/pokemon/salam.png" alt=""><br/>
        <aside id="pv_2">PV : 20</aside>
        <aside id="xp_2">XP : 10 </aside>
      </div>
    </aside>
    <div id="toHideAfter">
      <p>
        <span id="enonce">Instancie un pokémon stocké dans une variable "$pokemon_1" :</span><br/>
        <input class="incode" type="text" id="input_instanciation" value="$" />
      </p>
      <p>
        <span class="chucho">(Sans espaces "de décoration" autour d'un "=" par exemple, et n'oubliez pas le ";" à la fin !)</span>
      </p>
      <p>
        <input class="center" type="button" value="Ok" onclick="checkAnswer(input_instanciation)"/><br/>
      </p>
    </div>
    <div id="dev">
      <p class="center">
        Que s'est-il passé ?
      </p>
      <p>
        La fonction <i>attaquer()</i> est appelée par le pokémon qui attaque.<br/>
        PHP va donc exécuter cette fonction en remplaçant le "$this" par "$pokemon_1",
        et le "$cible" par le paramètre "$pokemon_2".<br/>
        <img  class="code" src="../assets/img/codes/attaquer_replace.png" alt=""/>
      </p>
      <p>
        La fonction <i>subir_degats()</i>, elle, est appelée par la cible.<br/>
        PHP va donc remplacer le "$this" par "$pokemon_2" et "$degats" par 5.<br/>
        <img  class="code" src="../assets/img/codes/subir_degats_replace.png" alt=""/>
      </p>
    </div>
  </div>
  <p>
    <a class="center" href="exos/exos_p3.html" target="_blank"><input class="exos_btn" type="button" value="Exercices"></a>
  </p>
  <p>
    <a class="center" href="page4.html"><input class="next_btn" type="button" value="Next : Encapsulation"></a>
  </p>
  <script src="../assets/scripts/page3.js"></script>
</body>
</html>
